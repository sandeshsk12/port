var RedditPixel_RS=function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var u="REDDIT_PIXEL",s="Reddit Pixel";o({},s,"RedditPixel"),o(o(o(o(o(o(o(o({},u,u),"Reddit_Pixel",u),"RedditPixel",u),"REDDITPIXEL",u),"redditpixel",u),"Reddit Pixel",u),"REDDIT PIXEL",u),"reddit pixel",u);var l={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}},f=function(){return r((function t(e,r){n(this,t),this.level=+r||l.ERROR.value,this.scope=e||""}),[{key:"setLogLevel",value:function(t){if(t&&"string"==typeof t){var e=t.toUpperCase();this.level=l[e]?l[e].value:this.level}}},{key:"setScope",value:function(t){this.scope=t||this.scope}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logBase(e,l.LOG.value)}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logBase(e,l.INFO.value)}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logBase(e,l.DEBUG.value)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logBase(e,l.WARN.value)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logBase(e,l.ERROR.value)}},{key:"logBase",value:function(t,e){if(this.level<=e){var n=Object.values(l).find((function(t){return t.value===e}));n.method.apply(n,i(this.getLogData(t)))}}},{key:"getLogData",value:function(t){if(Array.isArray(t)&&t.length>0){var e="%c RS SDK";this.scope&&(e="".concat(e," - ").concat(this.scope));var n=t[0].trim();e="".concat(e," %c ").concat(n);var r=[];return r.push(e),r.push("font-weight: bold; background: black; color: white;"),r.push("font-weight: normal;"),r.push.apply(r,i(t.slice(1))),r}return t}}])}();function d(t){return null!=t&&"object"===c(t)&&!0===t["@@functional/placeholder"]}function p(t){return function e(n){return 0===arguments.length||d(n)?e:t.apply(this,arguments)}}function y(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return d(n)?e:p((function(e){return t(n,e)}));default:return d(n)&&d(r)?e:d(n)?p((function(e){return t(e,r)})):d(r)?p((function(e){return t(n,e)})):t(n,r)}}}var h=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function v(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function g(t,e,n){for(var r=0,o=n.length;r<o;){if(t(e,n[r]))return!0;r+=1}return!1}function m(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var w="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},b=Object.prototype.toString,A=function(){return"[object Arguments]"===b.call(arguments)?function(t){return"[object Arguments]"===b.call(t)}:function(t){return m("callee",t)}}(),S=!{toString:null}.propertyIsEnumerable("toString"),j=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],k=function(){return arguments.propertyIsEnumerable("length")}(),O=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},_="function"!=typeof Object.keys||k?p((function(t){if(Object(t)!==t)return[];var e,n,r=[],o=k&&A(t);for(e in t)!m(e,t)||o&&"length"===e||(r[r.length]=e);if(S)for(n=j.length-1;n>=0;)m(e=j[n],t)&&!O(r,e)&&(r[r.length]=e),n-=1;return r})):p((function(t){return Object(t)!==t?[]:Object.keys(t)})),x=p((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function I(t,e,n,r){var o=v(t);function i(t,e){return B(t,e,n.slice(),r.slice())}return!g((function(t,e){return!g(i,e,t)}),v(e),o)}function B(t,e,n,r){if(w(t,e))return!0;var o,i,a=x(t);if(a!==x(e))return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(a){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(o=t.constructor,null==(i=String(o).match(/^function (\w*)/))?"":i[1]))return t===e;break;case"Boolean":case"Number":case"String":if(c(t)!==c(e)||!w(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!w(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var u=n.length-1;u>=0;){if(n[u]===t)return r[u]===e;u-=1}switch(a){case"Map":return t.size===e.size&&I(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&I(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var s=_(t);if(s.length!==_(e).length)return!1;var l=n.concat([t]),f=r.concat([e]);for(u=s.length-1;u>=0;){var d=s[u];if(!m(d,e)||!B(e[d],t[d],l,f))return!1;u-=1}return!0}var E=y((function(t,e){return B(t,e,[],[])}));var R=p((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():h(t)?[]:function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)?"":function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)?{}:A(t)?function(){return arguments}():function(t){var e=Object.prototype.toString.call(t);return"[object Uint8ClampedArray]"===e||"[object Int8Array]"===e||"[object Uint8Array]"===e||"[object Int16Array]"===e||"[object Uint16Array]"===e||"[object Int32Array]"===e||"[object Uint32Array]"===e||"[object Float32Array]"===e||"[object Float64Array]"===e||"[object BigInt64Array]"===e||"[object BigUint64Array]"===e}(t)?t.constructor.from(""):void 0})),P=p((function(t){return null!=t&&E(t,R(t))})),C=y((function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n})),U=function(t){return"object"===c(t)||"string"==typeof t?!P(t):P(t)},L=function(t){return!function(t){return void 0===t}(t)&&function(t){return null!=t}(t)&&U(t)};var D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function T(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function H(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}var q={exports:{}};var z,F={exports:{}},M=H(Object.freeze({__proto__:null,default:{}}));function N(){return z||(z=1,F.exports=(t=t||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==D&&D.crypto&&(n=D.crypto),!n)try{n=M}catch(h){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(h){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(h){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},a=i.lib={},c=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var c=0;c<o;c+=4)e[r+c>>>2]=n[c>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new u.init(e,t)}}),s=i.enc={},l=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new u.init(n,e/2)}},f=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new u.init(n,e)}},d=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,c=i/(4*a),s=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*a,l=t.min(4*s,i);if(s){for(var f=0;f<s;f+=a)this._doProcessBlock(o,f);n=o.splice(0,s),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});a.Hasher=p.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new y.HMAC.init(t,n).finalize(e)}}});var y=i.algo={};return i}(Math),t)),F.exports;var t}var W;var G,V=T((W||(W=1,q.exports=(G=N(),function(t){var e=G,n=e.lib,r=n.WordArray,o=n.Hasher,i=e.algo,a=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(a[o]=n(t.pow(r,.5))),c[o]=n(t.pow(r,1/3)),o++),r++}();var u=[],s=i.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],l=n[5],f=n[6],d=n[7],p=0;p<64;p++){if(p<16)u[p]=0|t[e+p];else{var y=u[p-15],h=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,v=u[p-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[p]=h+u[p-7]+g+u[p-16]}var m=r&o^r&i^o&i,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+c[p]+u[p];d=f,f=l,l=s,s=a+b|0,a=i,i=o,o=r,r=b+(w+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(s),e.HmacSHA256=o._createHmacHelper(s)}(Math),G.SHA256)),q.exports)),X=function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},a=r.email,c=r.externalId,u=r.idfa,s=r.aaid;if(L(a)&&(i.email=V(a).toString()),L(c)&&(i.externalId=V(c).toString()),"string"==typeof(n=null===(t=o.os)||void 0===t?void 0:t.name)&&["ios","watchos","ipados","tvos"].includes(null==n?void 0:n.toLowerCase())){var l,f=u||(null===(l=o.device)||void 0===l?void 0:l.advertisingId);L(f)&&(i.idfa=V(f).toString())}if("android"===(null===(e=o.os)||void 0===e?void 0:e.name)){var d,p=s||(null===(d=o.device)||void 0===d?void 0:d.advertisingId);L(p)&&(i.aaid=V(p).toString())}return C(L,i)},$=new f(s),K=function(){return r((function t(e,r,o){n(this,t),r.logLevel&&$.setLogLevel(r.logLevel),this.analytics=r,this.pixelId=e.advertiserId,this.name=u,this.eventMappingFromConfig=e.eventMappingFromConfig;var i=null!=o?o:{};this.shouldApplyDeviceModeTransformation=i.shouldApplyDeviceModeTransformation,this.propagateEventsUntransformedOnError=i.propagateEventsUntransformedOnError,this.destinationId=i.destinationId}),[{key:"init",value:function(){var t,e,n=this.analytics.getUserTraits();t=this.pixelId,e=X(n),function(t,e){if(!t.rdt){var n=t.rdt=function(){n.sendEvent?n.sendEvent.apply(n,arguments):n.callQueue.push(arguments)};n.callQueue=[];var r=e.createElement("script");r.src="https://www.redditstatic.com/ads/pixel.js",r.async=!0,r.setAttribute("data-loader","RS_JS_SDK");var o=e.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}}(window,document),Object.keys(e).length?window.rdt("init",t,e):window.rdt("init",t)}},{key:"isLoaded",value:function(){return!(!window.rdt||window.rdt.pixelId!==this.pixelId)}},{key:"isReady",value:function(){return this.isLoaded()}},{key:"identify",value:function(t){var e,n;this.eventMappingFromConfig.some((function(t){return"SignUp"===t.to}))||window.rdt("track","SignUp");var r=X(null===(e=t.message)||void 0===e||null===(e=e.context)||void 0===e?void 0:e.traits,null===(n=t.message)||void 0===n?void 0:n.context);Object.keys(r).length>0&&window.rdt("init",this.pixelId,r)}},{key:"track",value:function(t){var e=t.message.event;if(e){var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"to",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o={};return Array.isArray(t)&&t.forEach((function(t){if(U(t[e])&&"string"==typeof t[e]){var i=r?t[e].toLowerCase().trim():t[e].trim();o[i]?o[i].includes(t[n])||o[i].push(t[n]):o[i]=[t[n]]}})),o}(this.eventMappingFromConfig,"from","to",!1);if(n[e]){var r=function(t,e){return e[t]?e[t]:null}(e,n);r.forEach((function(t){window.rdt("track",t)}))}else switch(e.toLowerCase()){case"product added":window.rdt("track","AddToCart");break;case"product added to wishlist":window.rdt("track","AddToWishlist");break;case"order completed":window.rdt("track","Purchase");break;case"lead":window.rdt("track","Lead");break;case"view content":case"product viewed":case"productlist viewed":window.rdt("track","ViewContent");break;case"search":window.rdt("track","Search");break;default:$.error("Invalid event ".concat(e,". Track call not supported"))}}else $.error("Event name is required")}},{key:"page",value:function(t){window.rdt("track","PageVisit")}}])}();return t.RedditPixel=K,t}({});
//# sourceMappingURL=RedditPixel.min.js.map
